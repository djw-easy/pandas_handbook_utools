
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>pandas.DataFrame.ewm — pandas 1.4.1 documentation</title>
<link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet"/>
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet"/>
<link href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../../_static/styles/pydata-sphinx-theme.css" rel="stylesheet" type="text/css">
<link href="../../_static/plot_directive.css" rel="stylesheet" type="text/css">
<link href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" rel="stylesheet" type="text/css">
<link href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" rel="stylesheet" type="text/css">
<link href="../../_static/css/getting_started.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/css/pandas.css" rel="stylesheet" type="text/css"/>
<link as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf" rel="preload"/>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/doctools.js"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
<script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
<link href="../../_static/favicon.ico" rel="shortcut icon">
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="pandas.DataFrame.expanding.html" rel="next" title="pandas.DataFrame.expanding"/>
<link href="pandas.DataFrame.eval.html" rel="prev" title="pandas.DataFrame.eval"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-27880019-2', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>
</link></link></link></link></link></link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-fluid" id="banner"></div>

<div class="container-xl">
<div class="row">


<main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
<div>
<section id="pandas-dataframe-ewm">
<h1>pandas.DataFrame.ewm<a class="headerlink" href="#pandas-dataframe-ewm" title="Permalink to this headline">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="pandas.DataFrame.ewm">
<span class="sig-prename descclassname"><span class="pre">DataFrame.</span></span><span class="sig-name descname"><span class="pre">ewm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">com</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">span</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">halflife</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_periods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_na</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'single'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/pandas-dev/pandas/blob/v1.4.1/pandas/core/generic.py#L11314-L11342"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pandas.DataFrame.ewm" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide exponentially weighted (EW) calculations.</p>
<p>Exactly one parameter: <code class="docutils literal notranslate"><span class="pre">com</span></code>, <code class="docutils literal notranslate"><span class="pre">span</span></code>, <code class="docutils literal notranslate"><span class="pre">halflife</span></code>, or <code class="docutils literal notranslate"><span class="pre">alpha</span></code> must be
provided.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>com</strong><span class="classifier">float, optional</span></dt><dd><p>Specify decay in terms of center of mass</p>
<p><span class="math notranslate nohighlight">\(\alpha = 1 / (1 + com)\)</span>, for <span class="math notranslate nohighlight">\(com \geq 0\)</span>.</p>
</dd>
<dt><strong>span</strong><span class="classifier">float, optional</span></dt><dd><p>Specify decay in terms of span</p>
<p><span class="math notranslate nohighlight">\(\alpha = 2 / (span + 1)\)</span>, for <span class="math notranslate nohighlight">\(span \geq 1\)</span>.</p>
</dd>
<dt><strong>halflife</strong><span class="classifier">float, str, timedelta, optional</span></dt><dd><p>Specify decay in terms of half-life</p>
<p><span class="math notranslate nohighlight">\(\alpha = 1 - \exp\left(-\ln(2) / halflife\right)\)</span>, for
<span class="math notranslate nohighlight">\(halflife &gt; 0\)</span>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">times</span></code> is specified, the time unit (str or timedelta) over which an
observation decays to half its value. Only applicable to <code class="docutils literal notranslate"><span class="pre">mean()</span></code>,
and halflife value will not apply to the other functions.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.0.</span></p>
</div>
</dd>
<dt><strong>alpha</strong><span class="classifier">float, optional</span></dt><dd><p>Specify smoothing factor <span class="math notranslate nohighlight">\(\alpha\)</span> directly</p>
<p><span class="math notranslate nohighlight">\(0 &lt; \alpha \leq 1\)</span>.</p>
</dd>
<dt><strong>min_periods</strong><span class="classifier">int, default 0</span></dt><dd><p>Minimum number of observations in window required to have a value;
otherwise, result is <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
</dd>
<dt><strong>adjust</strong><span class="classifier">bool, default True</span></dt><dd><p>Divide by decaying adjustment factor in beginning periods to account
for imbalance in relative weightings (viewing EWMA as a moving average).</p>
<ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">adjust=True</span></code> (default), the EW function is calculated using weights
<span class="math notranslate nohighlight">\(w_i = (1 - \alpha)^i\)</span>. For example, the EW moving average of the series
[<span class="math notranslate nohighlight">\(x_0, x_1, ..., x_t\)</span>] would be:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[y_t = \frac{x_t + (1 - \alpha)x_{t-1} + (1 - \alpha)^2 x_{t-2} + ... + (1 -
\alpha)^t x_0}{1 + (1 - \alpha) + (1 - \alpha)^2 + ... + (1 - \alpha)^t}\]</div>
<ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">adjust=False</span></code>, the exponentially weighted function is calculated
recursively:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
y_0 &amp;= x_0\\
y_t &amp;= (1 - \alpha) y_{t-1} + \alpha x_t,
\end{split}\end{split}\]</div>
</dd>
<dt><strong>ignore_na</strong><span class="classifier">bool, default False</span></dt><dd><p>Ignore missing values when calculating weights.</p>
<ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">ignore_na=False</span></code> (default), weights are based on absolute positions.
For example, the weights of <span class="math notranslate nohighlight">\(x_0\)</span> and <span class="math notranslate nohighlight">\(x_2\)</span> used in calculating
the final weighted average of [<span class="math notranslate nohighlight">\(x_0\)</span>, None, <span class="math notranslate nohighlight">\(x_2\)</span>] are
<span class="math notranslate nohighlight">\((1-\alpha)^2\)</span> and <span class="math notranslate nohighlight">\(1\)</span> if <code class="docutils literal notranslate"><span class="pre">adjust=True</span></code>, and
<span class="math notranslate nohighlight">\((1-\alpha)^2\)</span> and <span class="math notranslate nohighlight">\(\alpha\)</span> if <code class="docutils literal notranslate"><span class="pre">adjust=False</span></code>.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">ignore_na=True</span></code>, weights are based
on relative positions. For example, the weights of <span class="math notranslate nohighlight">\(x_0\)</span> and <span class="math notranslate nohighlight">\(x_2\)</span>
used in calculating the final weighted average of
[<span class="math notranslate nohighlight">\(x_0\)</span>, None, <span class="math notranslate nohighlight">\(x_2\)</span>] are <span class="math notranslate nohighlight">\(1-\alpha\)</span> and <span class="math notranslate nohighlight">\(1\)</span> if
<code class="docutils literal notranslate"><span class="pre">adjust=True</span></code>, and <span class="math notranslate nohighlight">\(1-\alpha\)</span> and <span class="math notranslate nohighlight">\(\alpha\)</span> if <code class="docutils literal notranslate"><span class="pre">adjust=False</span></code>.</p></li>
</ul>
</dd>
<dt><strong>axis</strong><span class="classifier">{0, 1}, default 0</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">'index'</span></code>, calculate across the rows.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">'columns'</span></code>, calculate across the columns.</p>
</dd>
<dt><strong>times</strong><span class="classifier">str, np.ndarray, Series, default None</span></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.0.</span></p>
</div>
<p>Only applicable to <code class="docutils literal notranslate"><span class="pre">mean()</span></code>.</p>
<p>Times corresponding to the observations. Must be monotonically increasing and
<code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype.</p>
<p>If 1-D array like, a sequence with the same shape as the observations.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 1.4.0: </span>If str, the name of the column in the DataFrame representing the times.</p>
</div>
</dd>
<dt><strong>method</strong><span class="classifier">str {‘single’, ‘table’}, default ‘single’</span></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<p>Execute the rolling operation per single column or row (<code class="docutils literal notranslate"><span class="pre">'single'</span></code>)
or over the entire object (<code class="docutils literal notranslate"><span class="pre">'table'</span></code>).</p>
<p>This argument is only implemented when specifying <code class="docutils literal notranslate"><span class="pre">engine='numba'</span></code>
in the method call.</p>
<p>Only applicable to <code class="docutils literal notranslate"><span class="pre">mean()</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> subclass</dt><dd></dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rolling</span></code></a></dt><dd><p>Provides rolling window calculations.</p>
</dd>
<dt><a class="reference internal" href="pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expanding</span></code></a></dt><dd><p>Provides expanding transformations.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>See <a class="reference internal" href="../../user_guide/window.html#window-exponentially-weighted"><span class="std std-ref">Windowing Operations</span></a>
for further usage details and examples.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">     B</span>
<span class="go">0  0.0</span>
<span class="go">1  1.0</span>
<span class="go">2  2.0</span>
<span class="go">3  NaN</span>
<span class="go">4  4.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">com</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">          B</span>
<span class="go">0  0.000000</span>
<span class="go">1  0.750000</span>
<span class="go">2  1.615385</span>
<span class="go">3  1.615385</span>
<span class="go">4  3.670213</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">          B</span>
<span class="go">0  0.000000</span>
<span class="go">1  0.750000</span>
<span class="go">2  1.615385</span>
<span class="go">3  1.615385</span>
<span class="go">4  3.670213</span>
</pre></div>
</div>
<p><strong>adjust</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">com</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">          B</span>
<span class="go">0  0.000000</span>
<span class="go">1  0.750000</span>
<span class="go">2  1.615385</span>
<span class="go">3  1.615385</span>
<span class="go">4  3.670213</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">com</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">          B</span>
<span class="go">0  0.000000</span>
<span class="go">1  0.666667</span>
<span class="go">2  1.555556</span>
<span class="go">3  1.555556</span>
<span class="go">4  3.650794</span>
</pre></div>
</div>
<p><strong>ignore_na</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">com</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ignore_na</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">          B</span>
<span class="go">0  0.000000</span>
<span class="go">1  0.750000</span>
<span class="go">2  1.615385</span>
<span class="go">3  1.615385</span>
<span class="go">4  3.225000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">com</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ignore_na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">          B</span>
<span class="go">0  0.000000</span>
<span class="go">1  0.750000</span>
<span class="go">2  1.615385</span>
<span class="go">3  1.615385</span>
<span class="go">4  3.670213</span>
</pre></div>
</div>
<p><strong>times</strong></p>
<p>Exponentially weighted mean with weights calculated with a timedelta <code class="docutils literal notranslate"><span class="pre">halflife</span></code>
relative to <code class="docutils literal notranslate"><span class="pre">times</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'2020-01-01'</span><span class="p">,</span> <span class="s1">'2020-01-03'</span><span class="p">,</span> <span class="s1">'2020-01-10'</span><span class="p">,</span> <span class="s1">'2020-01-15'</span><span class="p">,</span> <span class="s1">'2020-01-17'</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">halflife</span><span class="o">=</span><span class="s1">'4 days'</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">times</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">          B</span>
<span class="go">0  0.000000</span>
<span class="go">1  0.585786</span>
<span class="go">2  1.523889</span>
<span class="go">3  1.523889</span>
<span class="go">4  3.233686</span>
</pre></div>
</div>
</dd></dl>
</section>
</div>

</main>
</div>
</div>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>

</body>
</html>